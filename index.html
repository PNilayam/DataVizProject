<!DOCTYPE html>
<link rel="stylesheet" type="text/css" href="style.css">
<title>Impact of weather conditions on Forest fires</title>
<script src='https://d3js.org/d3.v5.min.js'></script>
<script src="project.js"></script>



<body onload="prepareData()" onresize= "updateXAxis(1)">

    
    <div class = "vizheader"> 
        Impact of weather conditions on Forest fires
    </div>
    </br>
    <div class = "vizdetails">
        <p>
        Forest fire, aka wildfire are a major concern of many countries. 
        Not only it leads to death and destruction of massive amount of wildlife, it also increase the level of air pollution drastically in the nearby areas.
        It creates wild-scale environmental damage, sometimes threatening human lives as well.
        In addition, it also creates huge expenses for governments to contain it.</p>
        <p>Some of the important factors impacting the extent of forest fires are <i>temperature</i>, <i></i>wind, rain and relative humidity.</p>

    </div>
    <div id="vizcontent">
        </br>
        <div id="info">
            <div id="slideidx">
                <a href="#" onclick="showSlide1()">1</a>
                <a href="#" onclick="showSlide2()">2</a>
                <a href="#" onclick="showSlide3()">3</a>
            </div>
            <div class="comment">

            </div>
            </br>
            Info
        </div>
        <div id="slide">
            <div class="chartheader"></div>
            <div id = "chartId"><svg class="chart" width = "95%" height="500"></svg></div>
        </div>
    </div>
    <div><label id = "slideIdx" class = "slideparam">0</label></div>
    </br>
    </br>
    <div><b>References:</b></br></br>
        P. Cortez and A. Morais. A Data Mining Approach to Predict Forest Fires using Meteorological Data.</br>
        In J. Neves, M. F. Santos and J. Machado Eds., New Trends in Artificial Intelligence,
        Proceedings of the 13th EPIA 2007 - Portuguese Conference on Artificial Intelligence, December,
        Guimaraes, Portugal, pp. 512-523, 2007. APPIA, ISBN-13 978-989-95618-0-9.</br>
        Available at: <a href="http://www.dsi.uminho.pt/~pcortez/fires.pdf" target="_blank">http://www.dsi.uminho.pt/~pcortez/fires.pdf</a>
        </div></br>
        <b>Data Repository: </b> <a href="http://archive.ics.uci.edu/ml/datasets/Forest+Fires" target="_blank">UCI Machine Learning Repository</a>
    </div>

<div class="chart111"></div>
<script>
    const margin = { top: 20, right: 20, bottom: 160, left: 45 }
const svgWidth = 420;
const svgHeight = 320;
const width = svgWidth - margin.left - margin.right
const height = svgHeight - margin.top - margin.bottom

const svg = d3
  .select('.container')
  .append('svg')
  .attr('width', svgWidth)
  .attr('height', svgHeight);

const graphArea = svg
  .append('g')
  .attr('transform', `translate(${margin.left}, ${margin.top})`);

// Donloaded from https://www.imdb.com/list/ls021348496/
const dataURL = 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/721250/2018%20Movie%20Rankings.csv';

(async () => {
  let data = await d3.csv(dataURL);

  const getX = d => d["Title"];
  const getY = d => +d["Num Votes"]; // convert to number from string

  // filter Top 10 data, and sort by num of votes
  data = data
    .slice(0, 10)
    .sort( (a, b) => -(getY(a) - getY(b)));

  const x = d3.scaleBand()
    .rangeRound([0, width])
    .domain(data.map(getX))
    .padding(0.1);

  const y = d3.scaleLinear()
    .range([height, 0])
    .domain([
      d3.min(data, getY),
      d3.max(data, getY)
    ])
    .nice();

  const defs = svg.append('defs');

  const bgGradient = defs
    .append('linearGradient')
    .attr('id', 'bg-gradient')
    // .attr('x1', '0')
    // .attr('y1', '0')
    // .attr('x2', '0')
    // .attr('y2', '1')
    .attr('gradientTransform', 'rotate(90)');

  bgGradient
    .append('stop')
    .attr('stop-color', '#F2C66B')
    .attr('offset', '0%');
  bgGradient
    .append('stop')
    .attr('stop-color', '#D13D73')
    .attr('offset', '100%');

  defs
    .append('clipPath')
    .attr('id', 'clip-bar-rects')
    .selectAll('bar')
    .data(data)
    .enter()
    .append('rect')
    .attr("x", d => x(getX(d)))
    .attr("y", d => y(getY(d)))
    .attr("width", x.bandwidth())
    .attr("height", d => height - y(getY(d)));

  const clipPath = graphArea
    .append('g')
    .attr('clip-path', `url(#clip-bar-rects)`);

  clipPath
    .append('rect')
    .attr('x', 0)
    .attr('y', 0)
    .attr('width', width)
    .attr('height', height)
    .style('fill', 'url(#bg-gradient)');

  const xAxis = d3.axisBottom(x);
  const yAxis = d3.axisLeft(y).ticks(5);

  const ax = graphArea
    .append('g')
    .attr('class', 'axis')
    .attr('transform', `translate(0, ${height})`)
    .call(xAxis);

  ax.selectAll('text')
    .style("text-anchor", "start")
    .style("alignment-baseline", "middle")
    .attr("transform", `translate(${x.bandwidth() / 2}, 10) rotate(90)`)

  graphArea
    .append('g')
    .attr('class', 'axis')
    .call(yAxis);

})();
</script>

<div class="container"></div>
</body>
</html>